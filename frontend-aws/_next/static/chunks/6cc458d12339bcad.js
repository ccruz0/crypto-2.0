(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17585,e=>{"use strict";let t=null,r=(t=new class e{config;healthCheckInterval=null;isLocalHealthy=!0;constructor(){this.config=this.detectEnvironment(),this.startHealthCheck()}detectEnvironment(){let e=window.location.hostname,t="localhost"===e||"127.0.0.1"===e,r=e.includes("54.254.150.31")||e.includes("ec2");return t?{apiUrl:"http://localhost:8002/api",environment:"local",isLocal:!0,isAWS:!1}:r?{apiUrl:"http://54.254.150.31:8000/api",environment:"aws",isLocal:!1,isAWS:!0}:{apiUrl:`http://${e}:8002/api`,environment:"local",isLocal:!0,isAWS:!1}}async checkLocalHealth(){try{let e=this.config.apiUrl.replace("/api","");return(await fetch(`${e}/health`,{method:"GET",signal:AbortSignal.timeout(3e3)})).ok}catch(e){return!1}}startHealthCheck(){this.config.isLocal}getConfig(){return{...this.config}}getApiUrl(){return this.config.isLocal&&!this.isLocalHealthy?"http://54.254.150.31:8002/api":this.config.apiUrl}isLocalBackendHealthy(){return this.isLocalHealthy}destroy(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}}).getApiUrl(),a=0,s=0,n=new Map;function i(e){let t=n.get(e)??0,r=Date.now();return r-t>=3e4&&(n.set(e,r),!0)}function o(e,t,r,a="error"){i(`${e}::${t}`)&&("warn"===a?console.warn:console.error)(t,r instanceof Error?{name:r.name,message:r.message,stack:r.stack}:r)}async function l(e,t){try{if(e.includes("/signals")){let e=Date.now();if(s>0&&e-s>=3e4&&(a=0,s=0),function(){let e=Date.now();if(s>0&&e-s>=3e4)return a=0,s=0,!1;if(a>=5)if(s>0&&e-s<3e4)return i("circuit-breaker-warning"),!0;else a=0,s=0;return!1}()){let t=Error("Circuit breaker open for signals endpoint");t.status=503;let r=3e4-(e-s);throw t.retryAfterMs=Math.max(0,r),t}}let n=`${r}${e}`,o=3e4;e.includes("/signals")?o=15e3:e.includes("/market/top-coins-data")?o=6e4:e.includes("/dashboard/state")?o=45e3:e.includes("/orders/history")||e.includes("/test/simulate-alert")?o=6e4:e.includes("/watchlist/")&&e.includes("/alert")?o=15e3:e.includes("/market/top-coins/custom")&&(o=3e4);let l=new AbortController,c=setTimeout(()=>{console.warn(`‚è∞ Timeout activado para ${e} despu\xe9s de ${o}ms`),l.abort()},o);Date.now();let d=await fetch(n,{...t,signal:l.signal,headers:{"Content-Type":"application/json","x-api-key":"demo-key",...t?.headers}});if(Date.now(),clearTimeout(c),!d.ok){let e=`HTTP error! status: ${d.status}`;try{let t=await d.json();t.detail?e=t.detail:t.message?e=t.message:"string"==typeof t?e=t:t.error&&(e=t.error)}catch{try{let t=await d.text();t&&(e=t)}catch{}}let t=Error(e);t.status=d.status,t.detail=e;let r=d.headers.get("retry-after");if(r){let e=Number(r);if(Number.isNaN(e)){let e=Date.parse(r);Number.isNaN(e)||(t.retryAfterMs=Math.max(0,e-Date.now()))}else t.retryAfterMs=1e3*e}throw t}let u=await d.json();return e.includes("/signals")&&(a=0,s=0),u}catch(t){if(e.includes("/signals")&&t instanceof Error){let e=t.message.includes("timeout")||t.message.includes("Request timeout")||"AbortError"===t.name;t.message.includes("Circuit breaker")||e||(a++,s=Date.now())}if(t instanceof Error){if("AbortError"===t.name){let r=30;e.includes("/signals")?r=15:e.includes("/market/top-coins-data")?r=60:e.includes("/dashboard/state")?r=45:e.includes("/orders/history")||e.includes("/test/simulate-alert")?r=60:e.includes("/watchlist/")&&e.includes("/alert")?r=10:e.includes("/market/top-coins/custom")&&(r=30),o(e,`‚è∞ API Timeout: ${e} (after ${r} seconds)`,t,"warn");let a=Error(`Request timeout for ${e}. The server may be processing the request. Please try again.`);throw a.status=408,a.retryAfterMs=5e3,a}else if(t.message.includes("Failed to fetch")){if(o(e,`üåê Network Error: ${e} (${t.message})`,t,"warn"),e.includes("/signals")||e.includes("/market/top-coins-data")||e.includes("/dashboard/state")||e.includes("/orders/history")){let t=Error(`Network error for ${e}. The server may be taking too long to respond. Please try again.`);throw t.status=0,t.retryAfterMs=3e3,t}{let r=Error(`Network error for ${e}: ${t.message}`);throw r.status=0,r.retryAfterMs=2e3,r}}}throw o(e,`API Error: ${e}`,t),t}}async function c(){try{return await l("/dashboard")||[]}catch(e){return o("getDashboard","Handled dashboard fetch failure (returning empty list)",e,"warn"),[]}}async function d(e){return await l("/dashboard",{method:"POST",body:JSON.stringify(e)})}async function u(e,t){return await l(`/dashboard/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function h(e,t){try{let r=(await c()).find(t=>t.symbol===e);r?await u(r.id,{symbol:e,exchange:r.exchange||"CRYPTO_COM",buy_target:r.buy_target,take_profit:r.take_profit,stop_loss:r.stop_loss,...t}):await d({symbol:e,exchange:"CRYPTO_COM",...t})}catch(t){throw o(`saveCoinSettings:${e}`,"Handled error while saving coin settings",t,"warn"),t}}async function g(){try{return await l("/account/balance?exchange=CRYPTO_COM")||[]}catch(e){return o("getAccountBalance","Handled account balance fetch failure (returning empty list)",e,"warn"),[]}}async function m(){try{let e=await l("/orders/open");return{orders:e.orders||[],count:e.count||0}}catch(e){return o("getOpenOrders","Handled open orders fetch failure (returning empty list)",e,"warn"),{orders:[],count:0}}}async function f(e=100,t=0){try{let r=new URLSearchParams({limit:e.toString(),offset:t.toString()}),a=await l(`/orders/history?${r.toString()}`);return{orders:a.orders||[],count:a.count||0,total:a.total,has_more:a.has_more}}catch(e){return o("getOrderHistory","Handled order history fetch failure (returning empty list)",e,"warn"),{orders:[],count:0}}}async function y(){try{let e=await l("/assets");return{assets:e.assets||[],total_value_usd:e.total_value_usd||0}}catch(e){return o("getPortfolio","Handled portfolio fetch failure (returning empty data)",e,"warn"),{assets:[],total_value_usd:0}}}async function p(){try{let e=await l("/market/top-coins-data");return{coins:e.coins||[],count:e.count||0}}catch(e){throw o("getTopCoins","Handled top coins fetch failure",e,"warn"),e}}async function w(e){return await l("/market/top-coins/custom",{method:"POST",body:JSON.stringify(e)})}async function b(e){return await l(`/market/top-coins/custom/${e}`,{method:"DELETE"})}async function x(e,t){let r=null;for(let a=1;a<=2;a++)try{let r=new URLSearchParams({exchange:"CRYPTO_COM",symbol:e});return t&&Object.entries(t).forEach(([e,t])=>{void 0!==t&&r.append(e,t.toString())}),await l(`/signals?${r.toString()}`)}catch(t){if(r=t,t.message?.includes("Circuit breaker open"))return t.retryAfterMs&&t.retryAfterMs,null;if(console.warn(`‚ö†Ô∏è getTradingSignals attempt ${a}/2 failed for ${e}:`,t),a<2){let e=1e3*Math.pow(2,a);await new Promise(t=>setTimeout(t,e))}}if(r&&!r.message?.includes("Circuit breaker open")&&o(`getTradingSignals:${e}`,`‚ùå getTradingSignals exhausted retries (2)`,r,"warn"),r?.message?.includes("Circuit breaker open"))return null;throw r}async function v(){try{return await l("/data-sources/status")}catch(t){let e=t instanceof Error?t.message:String(t);return o("getDataSourcesStatus",`üåê Network issue while fetching data source status (${e})`,t,"warn"),{binance:{available:!1,priority:1,response_time:0,last_check:null},kraken:{available:!1,priority:2,response_time:0,last_check:null},crypto_com:{available:!1,priority:3,response_time:0,last_check:null},coinpaprika:{available:!1,priority:4,response_time:0,last_check:null}}}}async function k(){try{return await l("/config")}catch(e){return o("getTradingConfig","Handled trading config fetch failure",e,"warn"),null}}async function C(e,t){try{return await l(`/coins/${e}`,{method:"PUT",body:JSON.stringify(t)})}catch(t){throw o(`updateCoinConfig:${e}`,"Handled coin config update failure",t,"warn"),t}}async function N(e,t){try{return await l(`/watchlist/${e}/alert`,{method:"PUT",body:JSON.stringify({alert_enabled:t})})}catch(t){throw o(`updateWatchlistAlert:${e}`,"Handled alert update failure",t,"warn"),t}}async function _(e,t,r=!1,a){try{let s={symbol:e,signal_type:t,force_order:r};return a&&a>0&&(s.trade_amount_usd=a),await l("/test/simulate-alert",{method:"POST",body:JSON.stringify(s)})}catch(t){throw o(`simulateAlert:${e}`,"Handled alert simulation failure",t,"warn"),t}}async function S(e){try{return await l("/orders/quick",{method:"POST",body:JSON.stringify(e)})}catch(e){throw o("quickOrder","Handled quick order failure",e,"warn"),e}}async function T(){try{return await l("/dashboard/state")||{balances:[],fast_signals:[],slow_signals:[],open_orders:[],last_sync:null,bot_status:{is_running:!1,status:"stopped",reason:null}}}catch(e){return o("getDashboardState","Handled dashboard state fetch failure (returning empty state)",e,"warn"),{balances:[],fast_signals:[],slow_signals:[],open_orders:[],last_sync:null,bot_status:{is_running:!0,status:"running",reason:"Status unavailable (checking...)"}}}}e.s(["addCustomTopCoin",()=>w,"getAccountBalance",()=>g,"getDashboard",()=>c,"getDashboardState",()=>T,"getDataSourcesStatus",()=>v,"getOpenOrders",()=>m,"getOrderHistory",()=>f,"getPortfolio",()=>y,"getTopCoins",()=>p,"getTradingConfig",()=>k,"getTradingSignals",()=>x,"quickOrder",()=>S,"removeCustomTopCoin",()=>b,"saveCoinSettings",()=>h,"simulateAlert",()=>_,"updateCoinConfig",()=>C,"updateWatchlistAlert",()=>N],17585)},20799,e=>{"use strict";var t=e.i(50951),r=e.i(28974),a=e.i(17585);function s(){let[e,s]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)("CRYPTO_COM"),u=async()=>{i(!0),l(null);try{let e=await (0,a.getAccountBalance)();e&&e.length>0&&s(e[0])}catch(e){l(e instanceof Error?e.message:"Failed to fetch balance")}finally{i(!1)}};return(0,r.useEffect)(()=>{u();let e=setInterval(u,3e4);return()=>clearInterval(e)},[c]),(0,t.jsxs)("div",{className:"container mx-auto p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Account Balance"}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"border border-gray-300 rounded px-4 py-2",title:"Select Exchange",children:[(0,t.jsx)("option",{value:"CRYPTO_COM",children:"Crypto.com"}),(0,t.jsx)("option",{value:"BINANCE",children:"Binance"})]}),(0,t.jsx)("button",{onClick:u,disabled:n,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400",children:n?"Loading...":"Refresh"})]})]}),o&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o}),e&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-100 px-6 py-4 border-b border-gray-300",children:(0,t.jsxs)("h2",{className:"text-xl font-semibold",children:["Balance: ",e.currency]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.currency})})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:e.balance}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:e.available})]})})]})})]})}),n&&!e&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading account balance..."})]})]})}e.s(["default",()=>s])}]);